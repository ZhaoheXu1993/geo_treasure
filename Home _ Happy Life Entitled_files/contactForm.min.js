"use strict";define("contactForm",["lodash","santaProps","utils","formCommon","reactDOM","experiment"],function(e,i,r,t,n,a){function s(){return e.map(E,function(e){return"label_"+e.keyPrefix})}function o(e){return e+"FieldLabel"}function l(e){return"hidden_"+o(e)}function u(e){return"required_"+o(e)}function d(){var e=this.state.notifications;return{notifications:{className:this.classSet({error:e.error,success:!e.error}),children:[e.message]}}}function c(e,i,r){var t=o(r.keyPrefix),n=!e[l(r.keyPrefix)];return{className:this.classSet({hidden:n}),children:[i[t]]}}function f(i,t,n){var a=r.validationUtils;return!(!i.hidden&&i.required)||("email"===t?a.isValidEmail(n):!e.isEmpty(n))}function m(e,i,r,t,n){return n?h(e,r,t):y(r,e[r],i.errorMessage,i.validationErrorMessage)}function p(i){return e.reduce(e.keys(i),function(e,i){return"notification"===i?e:e&&i},!0)}function h(i,r,t){var n={},a=i[r];return a&&a.error&&(n[r]={error:!0},p(i)&&(n.notifications={error:!1,message:""})),n[r]=e.assign(n[r]||{},{hidden:a.hidden,required:a.required,value:t}),n}function y(e,i,r,t){var n={};return n[e]={error:!0,hidden:i.hidden,required:i.required,value:i.value},n.notifications={message:"email"===e?r:t,error:!0},n}function v(i){var r=i.target.id.replace(this.props.id,"").replace("Field","").toLowerCase();this.setState(e.assign(this.state[r],{error:!1}))}function F(i){var r=i.target.id.replace(this.props.id,"").replace("Field","").toLowerCase();this.setState(e.assign(this.state[r],{value:i.target.value}))}function P(){return e.merge(e.pick(this.translatedKeys,M),{textDirection:"left"})}function g(){return{hidden_emailFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_addressFieldLabel:!1,hidden_subjectFieldLabel:!0,hidden_messageFieldLabel:!0,required_emailFieldLabel:!0,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_addressFieldLabel:!1,required_subjectFieldLabel:!1,required_messageFieldLabel:!1}}function b(){return e.defaults(e.clone(this.props.compData),P.call(this))}function k(i){return e.isEmpty(i)?g():i}function x(i){return e.isEmpty(i.compProp)?g():i.compProp}function L(i){return e.reduce(E,function(e,r){var t=!i[l(r.keyPrefix)];return e["$"+r.keyPrefix]=t?r.keyPrefix+"Hidden":"",e},{})}function q(){return e.map(E,function(e){return e.keyPrefix+"Field"})}function _(i,r,t){var n=r[o(t.keyPrefix)],a=this.state[t.keyPrefix],s={required:!!i[u(t.keyPrefix)],hidden:!i[l(t.keyPrefix)]};return e.merge(a,s),{name:n,value:a.value,className:this.classSet(a),placeholder:n,onChange:F.bind(this),onClick:v.bind(this)}}function C(i,r){var t=e.map(E,_.bind(this,i,r));return e.zipObject(q(),t)}function S(i,r){var t=e.map(E,c.bind(this,i,r));return e.zipObject(s(),t)}var E=[{id:"field1",keyPrefix:"name"},{id:"field2",keyPrefix:"email"},{id:"field3",keyPrefix:"phone"},{id:"field4",keyPrefix:"address"},{id:"field5",keyPrefix:"subject"},{id:"field6",keyPrefix:"message"}],M=["nameFieldLabel","emailFieldLabel","phoneFieldLabel","addressFieldLabel","subjectFieldLabel","messageFieldLabel","errorMessage","successMessage","validationErrorMessage"];return{displayName:"ContactForm",mixins:[t.formMixin],propTypes:{compData:i.Types.Component.compData.isRequired,compProp:i.Types.Component.compProp.isRequired},statics:{useSantaTypes:!0},componentWillReceiveProps:function(i){var r=k(this.props.compProp),t=x(i),n=L(r),a=L(t);e.isEqual(n,a)||this.setState(a)},getFormInitialState:function(){var i=k(this.props.compProp),r={mailSent:!1};e.forEach(E.concat({keyPrefix:"notifications"}),function(e){r[e.keyPrefix]={error:!1,hidden:!i[l(e.keyPrefix)],required:!!i[u(e.keyPrefix)]}}),r.notifications.message="";var t=L(i);return e.merge(r,t)},getFormInputs:function(){return e.map(E,"keyPrefix")},getActivityName:function(){return"ContactFormActivity"},getFormFields:function(i,r){return e.reduce(["name","subject","message","phone","email","address"],function(e,t){var n=k(this.props.compProp),a=b.call(this);return n[l(t)]&&(i&&this.state[t].value||!i)&&(e[r?t:a[t+"FieldLabel"]]=this.state[t].value||""),e}.bind(this),{})},getFieldsForActivityReporting:function(){return this.getFormFields(!1,!0)},getFieldLabels:function(){var i=b.call(this);return e.reduce(E,function(e,r){return e[r.keyPrefix]=i[r.keyPrefix+"FieldLabel"],e},{})},isFormValid:function(){var i=this.state,r=b.call(this),t=e.clone(i),a=this.state.email.value,s=f(i.email,"email",a);t=m(i,r,"email",a,s);var o;return s&&(o=e.reduce(E,function(a,s){var o=n.findDOMNode(this.refs[s.keyPrefix+"Field"]).value,l=f(i[s.keyPrefix],s.keyPrefix.toLowerCase(),o);return t=e.assign(t,m(i,r,s.keyPrefix,o,l)),a&&l}.bind(this),!0)),this.setState(t),o},getInputName:function(){return a.isOpen("sendContactFormEmailsViaPong")?this.state.name.value||null:this.state.name.value||"n/a"},getLangKeys:function(e){return r.translations.contactFormTranslations[e]},getFormSkinProperties:function(){var i=b.call(this),r=k(this.props.compProp),t=C.call(this,r,i),n=S.call(this,r,i),a=d.call(this);return e.assign({},t,n,a)}}});
//# sourceMappingURL=contactForm.min.js.map