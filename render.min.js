"use strict";define("render",["lodash","coreUtils","utils","core","reactDOM","experiment","animations","tweenEngine","TweenMax","TimelineMax","ScrollToPlugin","DrawSVGPlugin"],function(e,r,n,i,t,a,s,o,d,w){function c(e){window.clientSideRender||requirejs(["warmup"],function(r){e(r)})}function l(e,r){var n=r.query,i=n.configName||"fullFunctionality",t=e[i]||e.fullFunctionality,a=t.getConfig();if(!n.dsOrigin)throw new Error("You must define dsOrigin parameter in order to use the documentServices - please speak to html-server team for a key");return a.origin=n.dsOrigin,a}function u(r,i,t){var a=e(t).keys().pull("masterPage").value();return e.mapValues(t,function(e,t){return i&&window.pagesData&&window.pagesData[t]?e:n.dataFixer.fix(e,a.slice(),r.requestModel,r.currentUrl,r.urlFormatModel,"site"===r.viewMode,r.rendererModel)})}function p(r,n,a,s,o){c(function(e){e.willRender(n)}),window.clientSideRender&&window.santaRenderingError&&window.parent&&window.parent.postMessage({santaRenderingError:window.santaRenderingError.errorInfo},"*");var d=window.document.getElementById("SITE_CONTAINER").children[0];s.onBeforeLayout=function(){var e=window.document.getElementById("SITE_CONTAINER").children[0],r=e.innerHTML;window.sssr.clientSantaVersion=e.getAttribute("data-santa-version"),c(function(i){window.sssr.success=d===e,window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:v()},window.parent&&(window.sssr.success?window.parent.postMessage("sssrSuccess","*"):(window.sssr.clientSantaVersion!==window.sssr.serverSantaVersion&&(r=window.sssr.clientSantaVersion,window.sssr.serverMarkup=window.sssr.serverSantaVersion),window.sssr.clientMarkup=r,window.sssr.serverMarkup=window.sssr.serverMarkup||d.innerHTML,window.parent.postMessage({sssrFail:{clientMarkup:window.sssr.clientMarkup,serverMarkup:window.sssr.serverMarkup}},"*"))),i.didRender(n)})},i.renderer.renderSite(n,a,s,function(n){window.rendered?window.rendered.forceUpdate():(window.rendered=t.render(n,window.document.getElementById("SITE_CONTAINER")),window.onpopstate=window.rendered.onPopState,window.onhashchange=window.rendered.onHashChange,window.parent!==window&&requirejs(["santaPreview"],function(e){window.rendered.registerAspectToEvent("siteReady",function(){o&&o(window.rendered),window.documentServices&&(window.parent.postMessage("documentServicesLoaded","*"),window.createSantaPreview=e)})}),r.qaAutomation&&(e.set(window,"testApi.domSelectors",r.qaAutomation.getDomSelectors(r.react,r.reactDOM)),window.testApi.domSelectors.setSearchRoot(window.rendered),e.set(window,"testApi.isReady",!0)))})}function S(t,a,c){var l={};r.urlUtils.isQueryParamOn(c.currentUrl,"isSantaEditor")&&(l=e.assign(l,{componentViewMode:"editor"})),c.rendererModel.previewMode&&(l=e.assign(l,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),c.renderFlags=e.assign({},c.renderFlags,l);var u=new n.FullSiteData(c),p=o.create(d,w);u.animations=s.create(p);var S=i.SiteDataAPI.createSiteDataAPIAndDal(u,a),m=S.siteData,v=S.siteDataAPI;return{fullSiteData:u,displayedSiteData:m,siteDataWrapper:S,viewerPrivateServices:{pointers:S.pointers,displayedDAL:S.displayedDal,siteDataAPI:v},isServerSideRender:m.isClientAfterSSR(),siteModel:c,siteDataAPI:v}}function m(r,i,t,s,o){var d=S(r,i,t),w=r.documentServices;try{w&&e.isUndefined(window.karmaIntegration)&&a.isOpen("sv_fullstory")&&n.integrations.fullStory.start()}catch(e){}if(w)d.siteDataWrapper.dataLoadedRegistrar=d.siteDataAPI.registerDataLoadedCallback.bind(d.siteDataAPI),window.documentServices=new w.Site(l(w.configs,d.siteModel.currentUrl),d.siteDataWrapper,e.partial(u,d.siteModel,d.isServerSideRender),e.partial(p,r,d.displayedSiteData,d.viewerPrivateServices,s)),e.set(window,"testApi.documentServices",window.documentServices);else{var c=d.fullSiteData.pagesData;d.fullSiteData.pagesData=c&&u(d.siteModel,d.isServerSideRender,c),c.masterPage&&d.siteDataAPI.createDisplayedPage("masterPage"),p(r,d.displayedSiteData,d.viewerPrivateServices,s,o)}}var v=Object.freeze("undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date));return{clientSide:m}});
//# sourceMappingURL=render.min.js.map