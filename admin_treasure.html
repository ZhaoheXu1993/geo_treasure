<!DOCTYPE html>
<html lang="en">
<body>
	<button id="geo" onclick="getLocation();">GET CURRENT LOCATION</button><br>
	<form id="form">
	  latitude:<br>
	  <input id="lat" type="text" name="lat" placeholder="latitude">
	  <br>
	  longtitude:<br>
	  <input id="lng" type="text" name="lng" placeholder="longtitude">
	  <br>
	  item:<br>
	  <input id="item" type="text" name="item" placeholder="item">
	  <br><br>
	  <input id="submit" type="submit" value="Submit">
	</form> 

	<p id="result"></p>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script>
		$(function() {
			$('#form').submit(function() {
				var obj = new Object();
				obj.lat = $('#lat').val();
				obj.lng = $('#lng').val();
				obj.item = $('#item').val();

				$.ajax({
					url: 'php/insert_treasure.php',
					type: 'POST',
					data: JSON.stringify(obj),
					success: function(response_data) {
						if (response_data.status == "200") {
							$('#result').html('success');
						} else {
							$('#result').html('failure');
						}
						
					},
					error: function(xhr, status, data) {
						console.log(xhr.responseText);
					}
				});
			});
		});
	</script>

	<!-- get location -->
	<script>
		function getLocation() {
		    if (navigator.geolocation) {
		        navigator.geolocation.getCurrentPosition(showPosition);
		    } else { 
		        $('#result').html("Geolocation is not supported by this browser.");
		    }
		}

		function showPosition(position) {
		    $('#lat').val(position.coords.latitude);
		    $('#lng').val(position.coords.longitude);
		}
	</script>
</body>
</html>