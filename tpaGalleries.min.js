"use strict";define("tpaGalleries/galleries/tpaGallery",["lodash","core","utils","tpa","color","experiment","coreUtils","santaProps"],function(e,t,r,s,i,a,o,l){function n(e){var t=e.split(",");return i({r:t[0],g:t[1],b:t[2]}).hexString()}function p(t,s,i){var a,o,l={};return e.forEach(s,function(p,u){a=r.colorParser.getColorValue(t,i[s[u]]),l[u]=e.includes(a,",")?n(a):a,o=i["alpha-"+s[u]],e.isUndefined(o)||(l["alpha"+r.stringUtils.capitalize(u)]=o)}),l}function u(t,r,s){return t.link?e.merge({},t,y.renderLink(t.link,r,s),{linkType:G[t.link.type]}):t}function c(t,r,s){return e.map(t,function(e){return u(e,r,s)})}function g(e,t,r,s){return r(o.urlUtils.joinURL(e,"/galleries/"+(s?"src/":"target/"))+t+"/"+t+".html",["compId","deviceType","locale","viewMode"])}function m(t,r,s,i,o){return{params:{props:e.merge({},t,p(s.THEME_DATA,i,o)),quality:s.globalImageQuality,marketingLandingPage:a.isOpen("sv_marketingLandingPage"),items:c(r,s.linkRenderInfo,s.rootNavigationInfo),mainPageId:s.mainPageId},eventType:"SETTINGS_UPDATED",intent:"addEventListener"}}function d(t){return e.map(t,function(t){return e.omit(t,"quality")})}var y=r.linkRenderer,h=t.compMixins,f=s.tpaMixins,G={ExternalLink:"WEBSITE",EmailLink:"EMAIL",PageLink:"PAGE",DocumentLink:"DOCUMENT",AnchorLink:"ANCHOR",DynamicPageLink:"DYNAMIC_PAGE_LINK"};return{mixins:[h.skinBasedComp,f.tpaUrlBuilder,f.tpaCompApi,h.skinInfo],propTypes:{id:l.Types.Component.id.isRequired,compProp:l.Types.Component.compProp.isRequired,compData:l.Types.Component.compData.isRequired,linkRenderInfo:l.Types.Link.linkRenderInfo.isRequired,rootNavigationInfo:l.Types.Component.rootNavigationInfo.isRequired,navigateToPage:l.Types.navigateToPage.isRequired,compTheme:l.Types.Component.theme.isRequired,style:l.Types.Component.style.isRequired,structure:l.Types.Component.structure.isRequired,sendPostMessage:l.Types.TPA.sendPostMessage.isRequired,santaBase:l.Types.santaBase.isRequired,isDebugMode:l.Types.isDebugMode.isRequired,globalImageQuality:l.Types.globalImageQuality.isRequired,mainPageId:l.Types.mainPageId.isRequired,THEME_DATA:l.Types.Theme.THEME_DATA.isRequired,isPlayingAllowed:l.Types.RenderFlags.isPlayingAllowed.isRequired,tpaComponentsDomAspect:l.Types.SiteAspects.tpaComponentsDomAspect.isRequired},messageSent:!1,isAlive:!1,componentInIframeReady:!1,processImageClick:function(t){var s=t.args[0],i=this.props.compData.items[s],a=this.props.compData.id,o=y.renderImageZoomLink(this.props.linkRenderInfo,this.props.rootNavigationInfo,i,a,void 0,this.props.id);if(this.props.rootNavigationInfo.pageItemId!==i.id){var l=y.getLinkUrlFromLinkProps(o),n=e.defaults({pageItemAdditionalData:o["data-page-item-context"]},r.wixUrlParser.parseUrl(this.props.linkRenderInfo,l));this.props.navigateToPage(n)}},getInitialState:function(){return this.currStyle=this.props.compTheme,this.lastRenderedStyleData={},{height:this.props.style.height}},setAppIsAlive:function(){this.isAlive=!0,this.askToSendIframeMessage(this.props),this.props.tpaComponentsDomAspect.markComponentIsAlive(this.props.id)},setComponentInIframeReady:function(){this.messageSent=!1,this.componentInIframeReady=!0,this.askToSendIframeMessage(this.props)},askToSendIframeMessage:function(e){var t=e.compProp,r=e.compData,s=e.structure.styleId;this.debounceIframe&&this.shouldDebounceIframe&&this.shouldDebounceIframe(t,r,s)?this.debounceIframe(t,r,s,e):this.sendIframeMessage(t,r,s,e)},sendIframeMessage:function(e,t,r,s){var i;if(this.isAlive&&this.componentInIframeReady&&!this.messageSent){var a=this.getOverrideParams?this.getOverrideParams(e):e,o=this.getStyleData(r,s);i=m(a,t.items,s,this.getStyleProps(),o),this.patchMessageProps&&this.patchMessageProps(i.params.props,r),this.props.sendPostMessage(this,i),this.lastRenderedStyleData=o,this.messageSent=!0}},shouldRenderIframe:function(t){var r=c(t.compData.items,t.linkRenderInfo,t.rootNavigationInfo),s=d(r),i=d(this.props.compData.items),a=this.props.globalImageQuality,o=!e.isEqual(a,t.globalImageQuality)||e.every(this.props.compData.items,function(t){return!(e.isEqual(t.quality,a)||e.isEmpty(t.quality)&&e.isEmpty(a))});return!e.isEqual(t.compProp,this.props.compProp)||!e.isEqual(i,s)||o||!e.isEqual(this.getStyleData(t.structure.styleId),this.lastRenderedStyleData)},componentWillReceiveProps:function(t){var r=t.compTheme;e.isEqual(this.currStyle,r)||(this.currStyle=r,this.messageSent=!1),this.shouldRenderIframe(t)&&(this.messageSent=!1),e.isEqual(t.style.height,this.props.style.height)||this.setState({height:t.style.height}),this.askToSendIframeMessage(t),this.isPlayingAllowed!==this.props.isPlayingAllowed&&(this.isPlayingAllowed=this.props.isPlayingAllowed,this.sendEditModeMessage(this.isPlayingAllowed?"site":"editor"))},sendEditModeMessage:function(e){if(this.isAlive&&this.componentInIframeReady){var t={params:{editMode:e},eventType:"EDIT_MODE_CHANGE",intent:"addEventListener"};this.props.sendPostMessage(this,t)}},getSkinProperties:function(){return{"":{style:{height:this.state.height||0,minWidth:10,minHeight:10}},iframe:{style:{height:this.state.height,width:this.props.style.width},className:"tpa-gallery-"+this.getGalleryType(),"data-src":g(this.props.santaBase,this.getGalleryType(),this.buildUrl,this.props.isDebugMode)}}}}}),define("tpaGalleries/galleries/masonry",["lodash","tpaGalleries/galleries/tpaGallery"],function(e,t){var r={textColor:"#000",descriptionColor:"#000",textBackgroundColor:"#fff",backgroundMouseoverColor:"#000",alphaBackgroundMouseoverColor:.4};return{displayName:"MasonryGallery",mixins:[t],statics:{useSantaTypes:!0},getGalleryType:function(){return"Masonry"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",textButtonColor:"color5"}},patchMessageProps:function(t,s){var i=this.getStyleData(s);i.version&&1!==parseInt(i.version,10)||e.assign(t,r)}}}),define("tpaGalleries/galleries/accordion",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"AccordionGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Accordion"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",borderColor:"color4"}}}}),define("tpaGalleries/galleries/impress",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"ImpressGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Impress"},getStyleProps:function(){return{bcgColor1:"color1",bcgColor2:"color2",bcgColor3:"color3",bcgColor4:"color4",bcgColor5:"color5",textColor:"color6",descriptionColor:"color7",textBackgroundColor:"color8"}}}}),define("tpaGalleries/galleries/freestyle",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"FreestyleGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Freestyle"},getStyleProps:function(){return{borderColor:"color1"}}}}),define("tpaGalleries/galleries/collage",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"CollageGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Collage"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",backgroundMouseoverColor:"color3"}},getOverrideParams:function(e){return e.maxImageSize>e.numOfCells&&(e.maxImageSize=e.numOfCells),e.minImageSize>e.maxImageSize?e.minImageSize=e.maxImageSize:e.maxImageSize<e.minImageSize&&(e.maxImageSize=e.minImageSize),e}}}),define("tpaGalleries/galleries/honeycomb",["lodash","tpaGalleries/galleries/tpaGallery","santaProps"],function(e,t,r){return{displayName:"HoneycombGallery",mixins:[t],propTypes:{compProp:r.Types.Component.compProp.isRequired},statics:{useSantaTypes:!0},getGalleryType:function(){return"Honeycomb"},debounceIframe:e.debounce(function(e,t,r){this.sendIframeMessage(e,t,r,this.props)},400),shouldDebounceIframe:function(e){return e.numOfColumns!==this.props.compProp.numOfColumns},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3",backgroundMouseoverColor:"color4",holesColor:"color5"}}}}),define("tpaGalleries/galleries/stripShowcase",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"StripShowcaseGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"StripShowcase"},getStyleProps:function(){return{}}}}),define("tpaGalleries/galleries/stripSlideshow",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"StripSlideshowGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"StripSlideshow"},getStyleProps:function(){return{titleColor:"color1",descriptionColor:"color2",backgroundColor:"color3"}}}}),define("tpaGalleries/galleries/thumbnails",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"ThumbnailsGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Thumbnails"},getStyleProps:function(){return{textColor:"color1",descriptionColor:"color2",textBackgroundColor:"color3"}}}}),define("tpaGalleries/galleries/tpa3DGallery",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"TPA3DGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Slicebox"},getStyleProps:function(){return{}}}}),define("tpaGalleries/galleries/tpa3DCarousel",["tpaGalleries/galleries/tpaGallery"],function(e){return{displayName:"TPA3DCarouselGallery",mixins:[e],statics:{useSantaTypes:!0},getGalleryType:function(){return"Carousel"},getStyleProps:function(){return{}}}}),define("tpaGalleries",["tpaGalleries/galleries/masonry","tpaGalleries/galleries/accordion","tpaGalleries/galleries/impress","tpaGalleries/galleries/freestyle","tpaGalleries/galleries/collage","tpaGalleries/galleries/honeycomb","tpaGalleries/galleries/stripShowcase","tpaGalleries/galleries/stripSlideshow","tpaGalleries/galleries/thumbnails","tpaGalleries/galleries/tpa3DGallery","tpaGalleries/galleries/tpa3DCarousel"],function(e,t,r,s,i,a,o,l,n,p,u){return{masonry:e,accordion:t,impress:r,freestyle:s,collage:i,honeycomb:a,stripShowcase:o,stripSlideshow:l,thumbnails:n,tpa3DGallery:p,tpa3DCarousel:u}});
//# sourceMappingURL=tpaGalleries.min.js.map